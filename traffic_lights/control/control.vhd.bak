LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.STD_LOGIC_UNSIGNED.ALL;
ENTITY control IS
PORT(  CLK:IN STD_LOGIC;
       DX:IN STD_LOGIC_VECTOR(7 DOWNTO 0);
		 NB:IN STD_LOGIC_VECTOR(7 DOWNTO 0);
	    Q:OUT STD_LOGIC_VECTOR(1 DOWNTO 0) );
 END control;
 ARCHITECTURE behav OF control IS
 SIGNAL S:STD_LOGIC_VECTOR(1 DOWNTO 0):="11";--状态，用于转换红绿黄灯使用
	  BEGIN
PROCESS(CLK,DX,NB)--状态转换进程
			BEGIN
			IF CLK'EVENT AND CLK='1' THEN
			  IF(DX="00000001")OR(NB="00000001")THEN 
			    Q<=S+1;
			   ELSE Q<=S;
			  END IF;
			 END IF;
			END PROCESS;
			END behav;